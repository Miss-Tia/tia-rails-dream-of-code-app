<p style="color: green"><%= notice %></p>

<%= render @course %>

<h2>Enrolled Students</h2>

<% if @students.any? %>
  <ul>
    <% @students.each do |student| %>
      <li><%= student.name %> - <%= student.email %></li>
    <% end %>
  </ul>
<% else %>
  <p>No students enrolled yet.</p>
<% end %>

<p>
  <a href="#">Enroll a new student</a> <!-- Placeholder link for future feature -->
</p>
<h3>Student Email List</h3>
<pre><%= @course.student_email_list.join(". ") %></pre>
<div>
  <%= link_to "Edit this course", edit_course_path(@course) %> |
  <%= link_to "Back to courses", courses_path %>

  <%= button_to "Destroy this course", @course, method: :delete %>
</div>

<h2>Submit an Assignment</h2>

<%= form_with model: Submission.new, url: submissions_path(course_id: @course.id), local: true do |form| %>
  <%= form.hidden_field :mentor_id, value: 1 %> <!-- TEMP: Replace when mentor is logged in -->

  <div>
    <%= form.label :enrollment_id, "Select Enrollment" %><br>
    <%= form.collection_select :enrollment_id, @enrollments, :id, ->(e) { "#{e.student.first_name} #{e.student.last_name}" }, prompt: "Choose a student" %>
  </div>

  <div>
    <%= form.label :lesson_id, "Select Lesson" %><br>
    <%= form.collection_select :lesson_id, @lessons, :id, :title, prompt: "Choose a lesson" %>
  </div>

  <div>
    <%= form.label :review_result, "Assignment Content" %><br>
    <%= form.text_area :review_result %>
  </div>

  <div>
    <%= form.submit "Submit Assignment" %>
  </div>
<% end %>